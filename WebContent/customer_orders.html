<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>iTOOLs | Customer Orders Page</title>

    <link href="css/plugins/toastr/toastr.min.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">


    <!-- xtra -->
    <!-- css files -->
    <link rel="stylesheet" href="css/xtra/theme.bootstrap.css">
    <link href="css/xtra/pad.css" rel="stylesheet">      

    <!-- Google Maps API  -->
    <script src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyAXO2mSHASmSqv3e3yqYV-QDcYosdI8XUE"></script>
    <link href="css/xtra/multi-select.css" media="screen" rel="stylesheet" type="text/css">

</head>

<body class="">

    <div id="wrapper">
    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse tooltip-demo" >
        <ul class="nav metismenu" id="side-menu">
            <li class="nav-header">
                <div class="dropdown profile-element"> <span>
                        <img alt="image" class="img-circle" src="img/profile_small.jpg" />
                         </span>
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">OF Admin</strong>
                         </span> <span class="text-muted text-xs block">Order Fulfillment Manager</span> </span> </a>
                </div>
                <div class="logo-element">
                    iTools
                </div>
            </li>
        <li class="active">
            <a href="customer_orders.html"><i class="fa fa-chevron-right"></i> <span class="nav-label">Customer Orders</span><span class="label label-warning pull-right customer_orders-side-notify" data-toggle="tooltip" data-placement="right" title="Shows the Number of Open Customer Requests"></span></a>
        </li>
        <li>
            <a href="customer_returns.html"><i class="fa fa-chevron-right"></i> <span class="nav-label">Customer Returns</span><span class="label label-warning pull-right customer_returns-side-notify" data-toggle="tooltip" data-placement="right" title="Shows the Number of Open Customer Return Requests"></span></a>
        </li>

        </ul>

        </div>
    </nav>
    <div id="page-wrapper" class="gray-bg">
    <div class="row border-bottom">
    <nav class="navbar navbar-static-top  " role="navigation" style="margin-bottom: 0">
            <div class="navbar-header tooltip-demo">
                <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#" data-toggle="tooltip" data-placement="right" title="Click here to minimize sidebar"><i class="fa fa-bars"></i> </a>
            </div>
            <ul class="nav navbar-top-links navbar-right tooltip-demo">
                <li>
                    <span class="m-r-sm text-muted welcome-message" style="font-style: italic"><a href="index.html" data-toggle="tooltip" data-placement="left" title="Go to Login Page">iTOOLs - Inventory Management Tool</a></span>
                </li>
                <li class="dropdown"><a href="#" class="dropdown-toggle"
                    data-toggle="dropdown"><span class="glyphicon glyphicon-cog"></span>
                        Settings <span class="caret"></span></a>
                    <ul class="dropdown-menu">                      
                        <li><a onclick="SESSION.logout();"><span
                                class="glyphicon glyphicon-log-out"></span> Logout</a></li>
                        <li><a onclick="window.location.reload(true);"><span
                                class="glyphicon glyphicon-refresh"></span> Reload</a></li>
                        <li><a onclick="DB.init();"><span
                                class="glyphicon glyphicon-repeat"></span> Init DB</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a onclick="DB.remove();"><span
                                class="glyphicon glyphicon-trash"></span> Delete DB</a></li>
                    </ul>
                </li>
            </ul>

        </div>
            <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-sm-4">
                    <h2>Customer Orders</h2>
                    <ol class="breadcrumb">
                        <li>
                            <a href="index.html">Home</a>
                        </li>
                        <li class="active">
                            <strong>Manage Customer Orders</strong>
                        </li>
                    </ol>
                </div>
                <div class="col-sm-8">
                    <div class="title-action">
                        <span  id="show-workflow" class="pull-right" style="cursor: pointer;" data-toggle="tooltip" data-placement="left" title="Click to See Work-Flow.">See Workflow <i class="fa fa-question-circle" style="font-size:1.2em;" ></i></a></span>                     
                    </div>
                </div>
            </div>

            <div class="wrapper wrapper-content">
<!-- ______________________________________________________________________________________________________ -->
        <div class="alert alert-info alert-dismissable" id="workflow" style="display:none; margin-bottom: -2%">

             
            <div class="row">
             <div class="col-lg-12">
              <div class="col-md-6"></div>
              <div class="col-md-5">
                <i class="fa fa-arrow-right" aria-hidden="true"></i> <strong><span class="label label-danger">Not Available</span></strong>
                <i class="fa fa-arrow-right" aria-hidden="true"></i> <strong><span class="label label-info">Send Suggestions</span></strong>
                <i class="fa fa-arrow-right" aria-hidden="true"></i> <strong><span class="label">Close</span></strong>                
              </div>
                <div class="col-md-1"></div>
            </div>
            </div>
            <div class="row">
            <div class="col-md-12">
            <div class="col-md-2"></div>                        
              <div class="col-md-2" style="padding:0;margin:0">

             <span style="font-style: italic; font-size:1.1em">Workflow to be followed:</span>

              </div>
              <div class="col-md-4">
                  
                  <strong><span class="label label-primary">Open</span></strong>
                  <i class="fa fa-arrow-right" aria-hidden="true"></i> <strong><span class="label label-success">Check Availability</span></strong>
                  <i class="fa fa-circle" aria-hidden="true"></i>
                  
              </div>
              <div class="col-md-4"></div>

            </div>
            </div>
            <div class="row">
             <div class="col-lg-12">

              <div class="col-md-6"></div>
              <div class="col-md-4">
                  
                <i class="fa fa-arrow-right" aria-hidden="true"></i> <strong><span class="label label-success">Available</span></strong>
                <i class="fa fa-arrow-right" aria-hidden="true"></i> <strong><span class="label label-info">Send to Warehouse</span></strong>
                <i class="fa fa-arrow-right" aria-hidden="true"></i> <strong><span class="label">Close</span></strong>
              </div>
              <div class="col-md-2"></div>              

                </div>
              </div>

            </div>
        </div> 


          <div class="tabs-container">
            <ul class="nav nav-tabs">

                <li id="Open-Orders-Tab" class="active"><a data-toggle="tab" href="#Open-Orders">Open Orders</a></li>
                <li id="Closed-Orders-Tab" class=""><a data-toggle="tab" href="#Closed-Orders">Closed Orders</a></li>
                
            </ul>
            <div class="tab-content">
                <div id="Open-Orders" class="tab-pane active">
                    <div class="panel-body">

                        <input type="text"
                                    class="search pull-right btn-sm" placeholder="Search Table" type="search" data-column="all"  style="margin:4px; width:300px">
                        <button class="toggle btn btn-xs" type="button" style="margin-top:20px;"><span class="glyphicon glyphicon-adjust" style="font-size: 10px;"></span>&nbsp;Enable Filters</button>
                        <button class="reset-filters btn btn-xs" type="button" style="margin-top:20px;display:none"><span class="glyphicon glyphicon-repeat" style="font-size: 10px;"></span>&nbsp;Reset Filters</button>   
                        <table id="table-open-orders" class="table table-striped table-condensed">
                            <thead id="thead-open-orders">
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer ID</th>
                                    <th>Item ID</th>
                                    <th>Item Name</th>                                  
                                    <th>Quantity</th>
                                    <th>Order Date</th>                                 
                                    <th>City</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                    
                                </tr>
                            </thead>
                            <tbody id="tbody-open-orders"></tbody>
                        </table>
                        <div id="pager-open-orders" class="pager" style="text-align:center; display:none">
                        <form>
                            <img src="img/first.png" class="first"/>
                            <img src="img/prev.png" class="prev"/>
                            <input type="text" class="pagedisplay"/>
                            <img src="img/next.png" class="next"/>
                            <img src="img/last.png" class="last"/>
                            <select class="pagesize">
                                <option selected="selected" value="10">10</option>
                                <option value="20">20</option>
                                <option value="30">30</option>
                                <option value="40">40</option>
                                <option value="50">50</option>
                                <!-- <option value="100">100</option>
                                <option value="200">200</option> -->
                            </select>
                        </form>
                        </div>

                    </div>
                </div>
                      
                <div id="Closed-Orders" class="tab-pane">
                    <div class="panel-body">


                        <input type="text"
                                    class="search pull-right btn-sm" placeholder="Search Table" type="search" data-column="all"  style="margin:4px; width:300px">
                        <button class="toggle btn btn-xs" type="button" style="margin-top:20px;"><span class="glyphicon glyphicon-adjust" style="font-size: 10px;"></span>&nbsp;Enable Filters</button>
                        <button class="reset-filters btn btn-xs" type="button" style="margin-top:20px;display:none"><span class="glyphicon glyphicon-repeat" style="font-size: 10px;"></span>&nbsp;Reset Filters</button>   
                        <table id="table-closed-orders" class="table table-striped table-condensed">
                            <thead id="thead-closed-orders">
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer ID</th>
                                    <th>Item ID</th>
                                    <th>Quantity</th>
                                    <th>Order Date</th>                                 
                                    <th>City</th>
                                    <th>Status</th>
                                    <th>Action</th>                             
                                </tr>
                            </thead>
                            <tbody id="tbody-closed-orders"></tbody>
                        </table>
                        <div id="pager-closed-orders" class="pager" style="text-align:center; display:none">
                        <form>
                            <img src="img/first.png" class="first"/>
                            <img src="img/prev.png" class="prev"/>
                            <input type="text" class="pagedisplay"/>
                            <img src="img/next.png" class="next"/>
                            <img src="img/last.png" class="last"/>
                            <select class="pagesize">
                                <option selected="selected" value="10">10</option>
                                <option value="20">20</option>
                                <option value="30">30</option>
                                <option value="40">40</option>
                                <option value="50">50</option>
                                <!-- <option value="100">100</option>
                                <option value="200">200</option> -->
                            </select>
                        </form>
                        </div>                    

                    </div>
                </div>
            </div>
          </div>   

<!-- ______________________________________________________________________________________________________ -->
            
            </div>
        </div>
        </div>

    <!-- Modal  -->
    <div class="modal fade" id="fwdModal" tabindex="-1" role="dialog">
      <div class="modal-dialog  modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">Forward Request to Warehouse</h4>
            </div>
            <div class="modal-body">
            <!-- Start of Modal Body -->
                    <div id="content-pane">
                            
                        <ol class="breadcrumb" style ="text-align: center; font-weight: bold">
                            <li>Order ID : <span id="fwd-order_id"> </span></li>
                            <li>Item ID : <span id="fwd-item_id"> </span></li>
                            <li>Quantity : <span id="fwd-qty"> </span></li>
                            <li>Source City : <span id="fwd-source"> </span></li>
                            <br>
                        </ol>                           
                            <table id="table-fwd" class="send-warehouse-table table table-striped">
                                  <thead id="thead-open-orders">
                                    <tr>
                                      <th>Warehouse ID</th>
                                      <th>Warehouse Location</th>
                                      <th>Availability</th>
                                      <th id="distance" class=\"{sorter: 'digit'}\">Distance from Source</th>
                                    </tr>
                                  </thead>
                                  <tbody id="tbody-open-orders">
                                    <tr>
                                      <td class = "wh_id">1</td>
                                      <td class="dest">Bangalore</td>
                                      <td class="available wh_1"> TBD </td>
                                      <td class="results">Calculating..</td>
                                    </tr>
                                    <tr>
                                      <td class = "wh_id">2</td>
                                      <td class="dest">Hyderabad</td>
                                      <td class="available wh_2"> TBD </td>
                                      <td class="results">Calculating..</td>                              
                                    </tr>
                                    <tr>
                                      <td class = "wh_id">3</td>
                                      <td class="dest">Chennai</td>
                                      <td class="available wh_3"> TBD </td>
                                      <td class="results">Calculating..</td>
                                    </tr>
                                    <tr>
                                      <td class = "wh_id">4</td>
                                      <td class="dest">Delhi</td>
                                      <td class="available wh_4"> TBD </td>
                                      <td class="results">Calculating..</td>
                                    </tr>                                                
                                  </tbody>
                            </table>
                    </div>
                    <div id="map-canvas">   
                    </div>
            <!-- End of Modal Body -->
            </div>
            <div class="modal-footer">
               <label for = "warehosue_id">Select Destination Warehouse:</label>
               <input name="warehouse_id "type="text" id="warehouse_id" type="search" data-column="all"  style="margin:4px; width:100px">
               <button class="fwd-request btn btn-sm" type="button">
                   <span class="glyphicon glyphicon-forward" style="font-size: 10px;"></span>&nbsp;Forward Request
               </button>
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <!-- <button type="button" class="btn btn-primary place_order">Place Order</button> -->
            </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
     </div><!-- /.modal -->
    </div>
    <!-- End of Modal  -->
    <!-- Modal 2 -->
    <div class="modal fade" id="sugg-Modal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">Please select suggestions to send to the Customer</h4>
            </div>
            <div class="modal-body" style="text-align: center";>
            <!-- Start of Modal Body -->
                        <ol class="breadcrumb" style ="text-align: center; font-weight: bold">
                            <li>Item ID : <span id="sugg-item_id"> </span></li>
                            <li>Quantity : <span id="sugg-qty"> </span></li>
                            <li>Item Kind : <span id="sugg-source"> </span></li>
                            <br>
                        </ol>   
                    <span id="display-error" style="color:red; style:italic"></span><hr>                        
                    <select multiple="multiple" id="select-sugg">
                    </select>   

            <!-- End of Modal Body -->
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default fwd-sugg-button">Forward Suggestions</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <!-- <button type="button" class="btn btn-primary place_order">Place Order</button> -->
            </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
     </div><!-- /.modal -->
    </div>
    <!-- End of Modal  -->        

  <script>
        var map;
        var geocoder;
        var bounds = new google.maps.LatLngBounds();
        var markersArray = [];

        //var origin1 = new google.maps.LatLng(55.930, -3.118);
        var origin;
        var destination;
        //var destinationB = new google.maps.LatLng(50.087, 14.421);

        var destinationIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=D|FF0000|000000';
        var originIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=O|FFFF00|000000';

         
        //------------------- 

        function initialize() {
          var opts = {
            center: new google.maps.LatLng(9.93123, 76.26730),
            zoom: 10
          };
          map = new google.maps.Map(document.getElementById('map-canvas'), opts);
          geocoder = new google.maps.Geocoder();
        }

        function calculateDistances(origin,destination) {
          var service = new google.maps.DistanceMatrixService();
          service.getDistanceMatrix(
            {
              origins: origin,
              destinations: destination,
              travelMode: google.maps.TravelMode.DRIVING,
              unitSystem: google.maps.UnitSystem.METRIC,
              avoidHighways: false,
              avoidTolls: false
            }, calcDistance);
        }

        function calcDistance(response, status) {
          if (status != google.maps.DistanceMatrixStatus.OK) {
            alert('Error was: ' + status);
          } else {
            var origins = response.originAddresses;
            var destinations = response.destinationAddresses;
            deleteOverlays();

            for (var i = 0; i < origins.length; i++) {
              var results = response.rows[i].elements;
              addMarker(origins[i], false);
              for (var j = 0; j < results.length; j++) {
                addMarker(destinations[j], true);
                $($('.results')[j]).text(results[j].distance.text.replace(/,/g,''));
              }
            }
            $('#table-fwd').trigger("update");
          }
        }

        function addMarker(location, isDestination) {
          var icon;
          if (isDestination) {
            icon = destinationIcon;
          } else {
            icon = originIcon;
          }
          geocoder.geocode({'address': location}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
              bounds.extend(results[0].geometry.location);
              map.fitBounds(bounds);
              var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                icon: icon
              });
              markersArray.push(marker);
            } else {
              alert('Geocode was not successful for the following reason: '
                + status);
            }
          });
        }

        function deleteOverlays() {
          for (var i = 0; i < markersArray.length; i++) {
            markersArray[i].setMap(null);
          }
          markersArray = [];
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>

    <!-- Mainly scripts -->
    <script src="js/jquery-2.1.1.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="js/inspinia.js"></script>
    <script src="js/plugins/pace/pace.min.js"></script>
    <script src="js/plugins/toastr/toastr.min.js"></script>

<!-- xtra -->
<!-- javascript libs -->
    <script src="lib/alasql.js"></script>
    <script src="lib/purl.js"></script>
    
    <!-- javascript plugins -->
    <script src="lib/jquery.tablesorter.js"></script>
    <script src="lib/jquery.tablesorter.widgets.js"></script>
    <script src="lib/jquery.tablesorter.pager.js"></script>
    <script src="lib/widget-editable.js"></script>
    <script src="lib/jquery.multi-select.js" type="text/javascript"></script>
    <script src="lib/moment.js"></script>


    <!-- javascript scripts -->
    <script src="js/xtra/db.js"></script>
    <script src="js/xtra/customer_orders.js"></script>

</body>

</html>
